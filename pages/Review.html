<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reviews & Testimonials - Camva Pro</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta name="description" content="Read customer reviews and share your experience with Camva Pro.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --brand-primary: #6366f1;
      --brand-secondary: #4f46e5;
      --brand-gradient: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --text-primary: #0f172a;
      --text-secondary: #475569;
      --text-light: #64748b;
      --border-color: #e2e8f0;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
      --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
      --shadow-xl: 0 25px 50px rgba(0,0,0,0.15);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 18px;
      --radius-xl: 24px;
      --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
    }

    /* Navigation */
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-color);
      z-index: 1000;
      transition: all var(--transition);
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 70px;
    }

    .logo {
      font-family: 'Poppins', sans-serif;
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--brand-primary);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      list-style: none;
      gap: 32px;
      align-items: center;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text-secondary);
      font-weight: 500;
      transition: color var(--transition);
    }

    .nav-links a:hover {
      color: var(--brand-primary);
    }

    .cta-button {
      background: var(--brand-gradient);
      color: white;
      padding: 12px 24px;
      border-radius: var(--radius-md);
      text-decoration: none;
      font-weight: 600;
      transition: all var(--transition);
      border: none;
      cursor: pointer;
    }

    .cta-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    /* Main Container */
    .main-container {
      margin-top: 70px;
      padding: 60px 0;
      background: var(--bg-secondary);
      min-height: calc(100vh - 70px);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Header */
    .page-header {
      text-align: center;
      margin-bottom: 60px;
    }

    .page-header h1 {
      font-family: 'Poppins', sans-serif;
      font-size: 3rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 16px;
    }

    .page-header p {
      font-size: 1.2rem;
      color: var(--text-secondary);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Tab Navigation */
    .tab-navigation {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 50px;
    }

    .tab-button {
      padding: 16px 32px;
      border: 2px solid var(--border-color);
      background: var(--bg-primary);
      color: var(--text-secondary);
      border-radius: var(--radius-lg);
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
      position: relative;
    }

    .tab-button.active {
      background: var(--brand-gradient);
      color: white;
      border-color: var(--brand-primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .tab-button:hover:not(.active) {
      border-color: var(--brand-primary);
      transform: translateY(-1px);
    }

    /* Tab Content */
    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Review Form Styles */
    .review-form-container {
      max-width: 600px;
      margin: 0 auto;
      background: var(--bg-primary);
      border-radius: var(--radius-xl);
      padding: 40px;
      box-shadow: var(--shadow-lg);
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text-primary);
      font-size: 1rem;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 16px;
      border: 2px solid var(--border-color);
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-family: inherit;
      background: var(--bg-secondary);
      transition: all var(--transition);
      color: var(--text-primary);
      font-weight: 500;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--brand-primary);
      background: white;
      box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
      transform: translateY(-2px);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    /* Star Rating */
    .star-rating {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .star {
      width: 32px;
      height: 32px;
      cursor: pointer;
      transition: all var(--transition);
      fill: #e2e8f0;
    }

    .star:hover,
    .star.active {
      fill: #facc15;
      transform: scale(1.1);
    }

    .rating-text {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-top: 8px;
    }

    .submit-button {
      background: var(--brand-gradient);
      color: white;
      padding: 16px 32px;
      border: none;
      border-radius: var(--radius-md);
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all var(--transition);
      width: 100%;
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .submit-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Reviews Display */
    .reviews-container {
      position: relative;
    }

    .reviews-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 30px;
      margin-bottom: 50px;
    }

    .stat-card {
      background: var(--bg-primary);
      padding: 30px;
      border-radius: var(--radius-xl);
      text-align: center;
      box-shadow: var(--shadow-md);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--brand-primary);
      margin-bottom: 8px;
    }

    .stat-label {
      color: var(--text-secondary);
      font-weight: 500;
    }

    /* Carousel Container */
    .carousel-container {
      position: relative;
      overflow: hidden;
      margin: 40px 0;
    }

    .carousel-wrapper {
      display: flex;
      transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      gap: 30px;
      padding: 20px 0;
    }

    .review-card {
      flex: 0 0 400px;
      background: var(--bg-primary);
      border-radius: var(--radius-xl);
      padding: 30px;
      box-shadow: var(--shadow-md);
      transition: all var(--transition);
      position: relative;
      transform: scale(0.9);
      opacity: 0.7;
    }

    .review-card.center {
      transform: scale(1);
      opacity: 1;
      box-shadow: var(--shadow-xl);
      border: 2px solid var(--brand-primary);
    }

    .review-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .reviewer-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--brand-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1.3rem;
    }

    .reviewer-info h4 {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .reviewer-plan {
      font-size: 0.9rem;
      color: var(--text-light);
      background: var(--bg-secondary);
      padding: 4px 12px;
      border-radius: 12px;
      display: inline-block;
    }

    .review-stars {
      display: flex;
      gap: 4px;
      margin-bottom: 16px;
    }

    .review-stars svg {
      width: 18px;
      height: 18px;
      fill: #facc15;
    }

    .review-text {
      color: var(--text-secondary);
      line-height: 1.6;
      font-size: 1rem;
    }

    /* Carousel Controls */
    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .carousel-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--bg-primary);
      border: 2px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition);
      color: var(--text-secondary);
    }

    .carousel-btn:hover {
      border-color: var(--brand-primary);
      color: var(--brand-primary);
      transform: scale(1.1);
    }

    .carousel-indicators {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }

    .indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--border-color);
      cursor: pointer;
      transition: all var(--transition);
    }

    .indicator.active {
      background: var(--brand-primary);
    }

    /* Alert Messages */
    .alert {
      padding: 16px 20px;
      border-radius: var(--radius-md);
      margin: 20px 0;
      font-weight: 500;
      animation: slideIn 0.3s ease;
    }

    .alert-success {
      background: #ecfdf5;
      color: #065f46;
      border: 1px solid #a7f3d0;
    }

    .alert-error {
      background: #fef2f2;
      color: #991b1b;
      border: 1px solid #fecaca;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    /* Loading Spinner */
    .loading-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
      display: none;
      margin: 0 auto;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .page-header h1 {
        font-size: 2.2rem;
      }

      .tab-navigation {
        flex-direction: column;
        align-items: center;
        gap: 12px;
      }

      .tab-button {
        width: 100%;
        max-width: 300px;
      }

      .review-form-container {
        margin: 0 20px;
        padding: 30px 20px;
      }

      .review-card {
        flex: 0 0 320px;
      }

      .carousel-wrapper {
        gap: 20px;
      }

      .reviews-stats {
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .container {
        padding: 0 20px;
      }
    }

    @media (max-width: 480px) {
      .reviews-stats {
        grid-template-columns: 1fr;
      }

      .review-card {
        flex: 0 0 280px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo">Camva Pro</a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="#features">Features</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="giveaway.html">Giveaway</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
      <a href="freetrial.html" class="cta-button">Start Free Trial</a>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="main-container">
    <div class="container">
      <!-- Page Header -->
      <div class="page-header">
        <h1>Reviews & Testimonials</h1>
        <p>Share your experience with Camva Pro or read what other creators are saying about our platform.</p>
      </div>

      <!-- Tab Navigation -->
      <div class="tab-navigation">
        <button class="tab-button active" onclick="switchTab('write-review')">
          ✍️ Write a Review
        </button>
        <button class="tab-button" onclick="switchTab('all-reviews')">
          ⭐ View All Reviews
        </button>
      </div>

      <!-- Write Review Tab -->
      <div id="write-review" class="tab-content active">
        <div class="review-form-container">
          <h2 style="text-align: center; margin-bottom: 30px; color: var(--brand-primary); font-family: 'Poppins', sans-serif;">Share Your Experience</h2>
          
          <form id="reviewForm">
            <div class="form-group">
              <label class="form-label" for="reviewerName">Your Name *</label>
              <input type="text" id="reviewerName" name="reviewerName" class="form-input" placeholder="Enter your full name" required>
            </div>

            <div class="form-group">
              <label class="form-label" for="planType">Subscription Plan *</label>
              <select id="planType" name="planType" class="form-select" required>
                <option value="">Select your plan</option>
                <option value="Monthly Plan">Monthly Plan</option>
                <option value="Quarterly Plan">Quarterly Plan</option>
                <option value="Annual Plan">Annual Plan</option>
                <option value="Giveaway Winner">Giveaway Winner</option>
                <option value="Free Trial">Free Trial</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">Rating *</label>
              <div class="star-rating">
                <svg class="star" data-rating="1" viewBox="0 0 24 24">
                  <path d="M12 17.3l6.18 4.03-1.64-7.19L21 9.76l-7.27-.63L12 2.5 10.27 9.13 3 9.76l4.46 4.38-1.64 7.19z"/>
                </svg>
                <svg class="star" data-rating="2" viewBox="0 0 24 24">
                  <path d="M12 17.3l6.18 4.03-1.64-7.19L21 9.76l-7.27-.63L12 2.5 10.27 9.13 3 9.76l4.46 4.38-1.64 7.19z"/>
                </svg>
                <svg class="star" data-rating="3" viewBox="0 0 24 24">
                  <path d="M12 17.3l6.18 4.03-1.64-7.19L21 9.76l-7.27-.63L12 2.5 10.27 9.13 3 9.76l4.46 4.38-1.64 7.19z"/>
                </svg>
                <svg class="star" data-rating="4" viewBox="0 0 24 24">
                  <path d="M12 17.3l6.18 4.03-1.64-7.19L21 9.76l-7.27-.63L12 2.5 10.27 9.13 3 9.76l4.46 4.38-1.64 7.19z"/>
                </svg>
                <svg class="star" data-rating="5" viewBox="0 0 24 24">
                  <path d="M12 17.3l6.18 4.03-1.64-7.19L21 9.76l-7.27-.63L12 2.5 10.27 9.13 3 9.76l4.46 4.38-1.64 7.19z"/>
                </svg>
              </div>
              <div class="rating-text" id="ratingText">Please select a rating</div>
            </div>

            <div class="form-group">
              <label class="form-label" for="reviewText">Your Review *</label>
              <textarea id="reviewText" name="reviewText" class="form-textarea" placeholder="Tell us about your experience with Camva Pro. What features do you love? How has it helped your work?" required maxlength="500"></textarea>
              <div style="text-align: right; font-size: 0.9rem; color: var(--text-light); margin-top: 5px;">
                <span id="charCount">0</span>/500 characters
              </div>
            </div>

            <button type="submit" class="submit-button">
              Submit Review
              <div class="loading-spinner" id="submitSpinner"></div>
            </button>
          </form>

          <div id="formAlert"></div>
        </div>
      </div>

      <!-- All Reviews Tab -->
      <div id="all-reviews" class="tab-content">
        <!-- Stats Section -->
        <div class="reviews-stats">
          <div class="stat-card">
            <div class="stat-number" id="averageRating">5.0</div>
            <div class="stat-label">Average Rating</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="totalReviews">0</div>
            <div class="stat-label">Total Reviews</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="fiveStarPercent">100%</div>
            <div class="stat-label">5-Star Reviews</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="recommendPercent">98%</div>
            <div class="stat-label">Would Recommend</div>
          </div>
        </div>

        <!-- Reviews Carousel -->
        <div class="carousel-container">
          <div class="carousel-wrapper" id="reviewsCarousel">
            <!-- Reviews will be populated here -->
          </div>
          
          <div class="carousel-controls">
            <button class="carousel-btn" id="prevBtn" onclick="previousReview()">
              &#8249;
            </button>
            <button class="carousel-btn" id="nextBtn" onclick="nextReview()">
              &#8250;
            </button>
          </div>
          
          <div class="carousel-indicators" id="carouselIndicators">
            <!-- Indicators will be populated here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Configuration
    const API_URL = 'https://script.google.com/macros/s/AKfycbyui59FfeFY5jFHNSunS7xadGKAb4COs_WBCInHuFJVtFYts1PeM6ESIx7wkgVgbRXeMA/exec';
    
    // Global variables
    let currentRating = 0;
    let reviews = [];
    let currentReviewIndex = 0;

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      initializeStarRating();
      initializeCharacterCounter();
      loadReviews();
      setupForm();
    });

    // Tab switching
    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Remove active class from all buttons
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(tabName).classList.add('active');
      
      // Add active class to clicked button
      event.target.classList.add('active');
      
      // Load reviews if switching to all reviews tab
      if (tabName === 'all-reviews') {
        loadReviews();
      }
    }

    // Star rating functionality
    function initializeStarRating() {
      const stars = document.querySelectorAll('.star');
      const ratingText = document.getElementById('ratingText');
      
      const ratingTexts = {
        1: 'Poor - Not satisfied',
        2: 'Fair - Below expectations',
        3: 'Good - Met expectations',
        4: 'Great - Exceeded expectations',
        5: 'Excellent - Outstanding experience!'
      };

      stars.forEach((star, index) => {
        star.addEventListener('click', () => {
          currentRating = index + 1;
          updateStarDisplay();
          ratingText.textContent = ratingTexts[currentRating];
        });

        star.addEventListener('mouseenter', () => {
          highlightStars(index + 1);
        });
      });

      document.querySelector('.star-rating').addEventListener('mouseleave', () => {
        updateStarDisplay();
      });

      function highlightStars(rating) {
        stars.forEach((star, index) => {
          if (index < rating) {
            star.classList.add('active');
          } else {
            star.classList.remove('active');
          }
        });
      }

      function updateStarDisplay() {
        highlightStars(currentRating);
      }
    }

    // Character counter
    function initializeCharacterCounter() {
      const textarea = document.getElementById('reviewText');
      const charCount = document.getElementById('charCount');
      
      textarea.addEventListener('input', () => {
        charCount.textContent = textarea.value.length;
      });
    }

    // Form setup
    function setupForm() {
      document.getElementById('reviewForm').addEventListener('submit', handleFormSubmit);
    }

    // Handle form submission
    async function handleFormSubmit(e) {
      e.preventDefault();
      
      const submitButton = document.querySelector('.submit-button');
      const spinner = document.getElementById('submitSpinner');
      const alertContainer = document.getElementById('formAlert');
      
      // Validation
      if (currentRating === 0) {
        showAlert('Please select a rating', 'error');
        return;
      }
      
      const formData = new FormData(e.target);
      formData.append('rating', currentRating);
      
      // Show loading state
      submitButton.disabled = true;
      spinner.style.display = 'block';
      submitButton.textContent = 'Submitting...';
      
      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          body: formData
        });
        
        const result = await response.json();
        
        if (result.status === 'success') {
          showAlert('Thank you for your review! It will be published after moderation.', 'success');
          resetForm();
        } else {
          showAlert(result.message || 'Error submitting review. Please try again.', 'error');
        }
      } catch (error) {
        console.error('Submission error:', error);
        showAlert('Network error. Please check your connection and try again.', 'error');
      } finally {
        // Reset loading state
        submitButton.disabled = false;
        spinner.style.display = 'none';
        submitButton.textContent = 'Submit Review';
      }
    }

    // Load reviews
    async function loadReviews() {
      try {
        const response = await fetch(API_URL + '?action=get_reviews');
        const data = await response.json();
        
        reviews = data.reviews || [];
        displayReviews();
        updateStats(data.stats);
      } catch (error) {
        console.error('Error loading reviews:', error);
        // Load sample data for demo
        loadSampleReviews();
      }
    }

    // Load sample reviews for demo
    function loadSampleReviews() {
      reviews = [
        {
          name: "Priya Sharma",
          plan: "Annual Plan",
          rating: 5,
          text: "Camva Pro has completely transformed my design workflow. The AI tools are incredible and save me hours every week. The background remover is especially impressive!"
        },
        {
          name: "Raj Kumar",
          plan: "Monthly Plan",
          rating: 5,
          text: "Amazing value for money! The premium templates and AI features make it so easy to create professional designs. Highly recommend for any creator."
        },
        {
          name: "Anita Singh",
          plan: "Quarterly Plan",
          rating: 4,
          text: "Great tool for social media content creation. Love the brand kit feature that keeps everything consistent across all my designs."
        },
        {
          name: "Vikash Gupta",
          plan: "Giveaway Winner",
          rating: 5,
          text: "Won the monthly giveaway and absolutely loving Camva Pro! The video editing tools are fantastic and the interface is so user-friendly."
        },
        {
          name: "Sneha Patel",
          plan: "Annual Plan",
          rating: 5,
          text: "Best design investment I've made for my business. The AI writer and magic resize features have streamlined my entire content creation process."
        }
      ];
      
      displayReviews();
      updateStats({
        averageRating: 4.8,
        totalReviews: reviews.length,
        fiveStarPercent: 85,
        recommendPercent: 98
      });
    }

    // Display reviews in carousel
    function displayReviews() {
      const carousel = document.getElementById('reviewsCarousel');
      const indicators = document.getElementById('carouselIndicators');
      
      carousel.innerHTML = '';
      indicators.innerHTML = '';
      
      reviews.forEach((review, index) => {
        // Create review card
        const card = document.createElement('div');
        card.className = 'review-card';
        if (index === 0) card.classList.add('center');
        
        card.innerHTML = `
          <div class="review-header">
            <div class="reviewer-avatar">${review.name.charAt(0).toUpperCase()}</div>
            <div class="reviewer-info">
              <h4>${getShortName(review.name)}</h4>
              <div class="reviewer-plan">${review.plan}</div>
            </div>
          </div>
          <div class="review-stars">
            ${generateStarHTML(review.rating)}
          </div>
          <div class="review-text">${review.text}</div>
        `;
        
        carousel.appendChild(card);
        
        // Create indicator
        const indicator = document.createElement('div');
        indicator.className = 'indicator';
        if (index === 0) indicator.classList.add('active');
        indicator.onclick = () => goToReview(index);
        indicators.appendChild(indicator);
      });
      
      updateCarouselPosition();
    }

    // Generate star HTML
    function generateStarHTML(rating) {
      let starsHTML = '';
      for (let i = 0; i < 5; i++) {
        if (i < rating) {
          starsHTML += `<svg viewBox="0 0 24 24"><path d="M12 17.3l6.18 4.03-1.64-7.19L21 9.76l-7.27-.63L12 2.5 10.27 9.13 3 9.76l4.46 4.38-1.64 7.19z"/></svg>`;
        } else {
          starsHTML += `<svg viewBox="0 0 24 24" style="fill: #e2e8f0;"><path d="M12 17.3l6.18 4.03-1.64-7.19L21 9.76l-7.27-.63L12 2.5 10.27 9.13 3 9.76l4.46 4.38-1.64 7.19z"/></svg>`;
        }
      }
      return starsHTML;
    }

    // Get short name for privacy
    function getShortName(fullName) {
      const parts = fullName.trim().split(' ');
      return parts.length > 1 ? `${parts[0]} ${parts[1].charAt(0)}.` : parts[0];
    }

    // Carousel navigation
    function nextReview() {
      if (currentReviewIndex < reviews.length - 1) {
        currentReviewIndex++;
        updateCarouselPosition();
      }
    }

    function previousReview() {
      if (currentReviewIndex > 0) {
        currentReviewIndex--;
        updateCarouselPosition();
      }
    }

    function goToReview(index) {
      currentReviewIndex = index;
      updateCarouselPosition();
    }

    // Update carousel position
    function updateCarouselPosition() {
      const carousel = document.getElementById('reviewsCarousel');
      const cards = carousel.querySelectorAll('.review-card');
      const indicators = document.querySelectorAll('.indicator');
      
      // Update card positions and styling
      cards.forEach((card, index) => {
        card.classList.remove('center');
        if (index === currentReviewIndex) {
          card.classList.add('center');
        }
      });
      
      // Update indicators
      indicators.forEach((indicator, index) => {
        indicator.classList.remove('active');
        if (index === currentReviewIndex) {
          indicator.classList.add('active');
        }
      });
      
      // Calculate offset for centering
      const cardWidth = 430; // 400px + 30px gap
      const containerWidth = carousel.parentElement.offsetWidth;
      const offset = (containerWidth / 2) - (cardWidth / 2) - (currentReviewIndex * cardWidth);
      
      carousel.style.transform = `translateX(${offset}px)`;
    }

    // Update stats
    function updateStats(stats) {
      document.getElementById('averageRating').textContent = stats.averageRating.toFixed(1);
      document.getElementById('totalReviews').textContent = stats.totalReviews;
      document.getElementById('fiveStarPercent').textContent = stats.fiveStarPercent + '%';
      document.getElementById('recommendPercent').textContent = stats.recommendPercent + '%';
    }

    // Utility functions
    function showAlert(message, type) {
      const alertContainer = document.getElementById('formAlert');
      alertContainer.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
      setTimeout(() => {
        alertContainer.innerHTML = '';
      }, 5000);
    }

    function resetForm() {
      document.getElementById('reviewForm').reset();
      currentRating = 0;
      document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
      document.getElementById('ratingText').textContent = 'Please select a rating';
      document.getElementById('charCount').textContent = '0';
    }

    // Auto-rotate carousel (optional)
    let autoRotateInterval;
    
    function startAutoRotate() {
      autoRotateInterval = setInterval(() => {
        if (reviews.length > 1) {
          currentReviewIndex = (currentReviewIndex + 1) % reviews.length;
          updateCarouselPosition();
        }
      }, 5000);
    }
    
    function stopAutoRotate() {
      if (autoRotateInterval) {
        clearInterval(autoRotateInterval);
      }
    }
    
    // Start auto-rotate when all reviews tab is active
    document.addEventListener('DOMContentLoaded', () => {
      const allReviewsTab = document.getElementById('all-reviews');
      if (allReviewsTab.classList.contains('active')) {
        setTimeout(startAutoRotate, 2000);
      }
    });

    // Handle window resize
    window.addEventListener('resize', () => {
      if (reviews.length > 0) {
        updateCarouselPosition();
      }
    });
  </script>
</body>
</html>
